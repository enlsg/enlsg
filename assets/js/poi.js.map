{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/map/Map.js","webpack:///./src/map/poi.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Map","accessToken","_classCallCheck","this","mapboxgl","config","style","center","zoom","attributionControl","controls","_setConfig","lat","lng","pitch","bearing","opt","arguments","length","undefined","_addControl","GeolocateControl","positionOptions","enableHighAccuracy","fitBoundsOptions","maxZoom","trackUserLocation","ScaleControl","maxWidth","unit","NavigationControl","functionName","configName","map","console","log","control","addControl","push","el","_objectSpread","container","forEach","on","onMapLoad","$","error","window","mapboxAccessToken","renderTo"],"mappings":"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","file":"poi.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","/**\n * For building a map\n */\nclass Map {\n\n  constructor(accessToken) {\n    mapboxgl.accessToken = accessToken;\n    this.config = {\n      style: 'mapbox://styles/mapbox/basic-v9',\n      center: [103.8123, 1.362],\n      zoom: 10,\n      attributionControl: false\n    };\n    this.controls = [];\n  }\n\n  /**\n   * Changing mapbox style\n   * @param {string} style\n   * @return {this}\n   */\n  style(style) {\n    return this._setConfig('setStyle', 'style', style);\n  }\n\n  /**\n   * Changing map center, or fly to the place\n   * @param {numeric} lat Latitude\n   * @param {numeric} lng Longitude\n   * @return {this}\n   */\n  center(lat, lng) {\n    return this._setConfig('flyTo', 'center', [lng, lat]);\n  }\n\n  /**\n   * Changing map center, or fly to the place\n   * @param {numeric} lat Latitude\n   * @param {numeric} lng Longitude\n   * @return {this}\n   */\n  zoom(zoom) {\n    return this._setConfig('zoomTo', 'zoom', zoom);\n  }\n\n  /**\n   * Changing map pitch\n   * @param {numeric} pitch The pitch number\n   * @return {this}\n   */\n  pitch(pitch) {\n    return this._setConfig('setPitch', 'pitch', pitch);\n  }\n\n  /**\n   * Changing map bearing\n   * @param {numeric} bearing The bearing number\n   * @return {this}\n   */\n  bearing(bearing) {\n    return this._setConfig('setBearing', 'bearing', bearing);\n  }\n\n  onMapLoad() {\n\n\n    // map.addSource(\"portal_data\", {\n    //     \"type\": \"geojson\",\n    //     \"data\": {\n    //         \"type\": \"FeatureCollection\",\n    //         \"features\": [\n    //       {\"type\":\"Feature\",\"geometry\":{\"type\":\"Point\",\"coordinates\":[103.818165,1.270491]},\"properties\": {\"title\":\"Japanese Navy Admiral Tomb\", \"p\":\"N\", \"d\": \"N\", \"i\": \"https://lh3.ggpht.com/4-rBuvi2ZUi7N6FrA9iasInqeSoV-DI3W8wvDv7B9366MIvhSoY9N3dndS0rTFED6p1SC04b1hGITIUoICKa\", \"id\":\"103.818165,1.270491\", \"desc\": \"Located near Mount Faber, this tombstone is the final resting place for a Japanese naval officer who was buried there in 1943.\"  }},\n    //       {\"type\":\"Feature\",\"geometry\":{\"type\":\"Point\",\"coordinates\":[103.812194,1.308772]},\"properties\": {\"title\":\"Istana Woodneuk\", \"p\":\"N\", \"d\": \"N\", \"i\":\"https://lh6.ggpht.com/TkemSsGUK9QWrJaOQNaSo1_W06dGALAr3NTNN-LZ7rj7voWR3ECd9fZU1gMSSXuUp6P7xdzJWPykDQYp80XdqQ\", \"id\":\"103.812194,1.308772\", \"desc\": \"This abandoned two-storey palace is located near the Singapore Botanic Gardens. It belongs to the State of Johor, and currently out of bounds to outsiders.\"   }},\n    //       {\"type\":\"Feature\",\"geometry\":{\"type\":\"Point\",\"coordinates\":[103.740621,1.160054]},\"properties\": {\"title\":\"Raffles Lighthouse\", \"p\":\"N\", \"d\": \"N\", \"i\":\"https://lh5.ggpht.com/vyPyVPoSyj5EQ6qf2fRERKRsWON3yFxo3QMChxxSL-hDThqRwIWPwKGjMAInYkl-jS6qqiF3sgyAKdtgMe6_\", \"id\":\"103.740621,1.160054\", \"desc\": \"Built in 1855, it's one of two operating lighthouses in Singapore. It's closed to public access except in April, when Maritime Port Authority will conduct educational tours.\"   }},\n    //       {\"type\":\"Feature\",\"geometry\":{\"type\":\"Point\",\"coordinates\":[103.808102,1.4142]},\"properties\": {\"title\":\"In Loving Memory Of President Wee\", \"p\":\"N\", \"d\": \"N\", \"i\": \"https://lh5.ggpht.com/sC-S_G8sIxy7OyzIE6sXTn5NX5TTzIfQOg6rMXus5ALMhIfjMc4H3Wc2Puo_QvedxDwWb4FTAuk-dQsL-CMN\", \"id\":\"103.808102,1.4142\", \"desc\": \"Wee Kim Wee served as the 4th President of Singapore from 1985 to 1993. He asked to be laid to rest at Mandai Columbarium alongside with ordinary citizens instead of Kranji War Cemetery, where late dignitaries are usually buried.\"  }},\n    //       {\"type\":\"Feature\",\"geometry\":{\"type\":\"Point\",\"coordinates\":[103.831929,1.463843]},\"properties\": {\"title\":\"The Battle for Singapore\", \"p\":\"N\", \"d\": \"N\", \"i\": \"https://lh4.ggpht.com/X2AlS2HggqRFKOkJvU-mfUL8HGVT6d8MGl497wQS2Sua1oWgs6M_FzI58dZFg0zbtAvU9cReWG7bw5BGO46z1g\", \"id\":\"103.831929,1.463843\", \"desc\": \"Located at the site of the former British naval base, this plaque commemorate the Battle for Singapore which fell to the Japanese in Febuarary 1942.\"  }}\n    //\n    //         ]\n    //     }\n    // });\n    //\n    //\n    //\n    // map.addLayer({\n    //     id: \"unclustered-point\",\n    //     type: \"symbol\",\n    //     source: \"portal_data\",\n    //     layout: {\n    //         \"icon-image\": \"marker-11\",\n    //         \"icon-optional\": true,\n    //         \"text-size\": 11.45,\n    //         \"text-field\": \"{title}\",\n    //         \"text-font\": [\"Open Sans Semibold\", \"Arial Unicode MS Bold\"],\n    //         \"text-offset\": [0, 0.9],\n    //         \"text-anchor\": \"top\"\n    //     },\n    //   \"paint\": {\n    //       //\"text-color\": \"#EBEDEF\",\n    //       \"text-color\": \"#c7cbd1\",\n    //       \"text-opacity\": 0.9,\n    //       \"text-halo-color\": \"#131c20\",\n    //           \"text-halo-blur\": 0.0,\n    //           \"text-halo-width\": 1\n    //   }\n    // });\n    //\n    //\n    //\n    //\n    // map.on('mouseenter', 'unclustered-point', function(e) {\n    //     // Change the cursor style as a UI indicator.\n    //     map.getCanvas().style.cursor = 'pointer';\n    //  });\n    //\n    // map.on('mouseleave', 'unclustered-point', function() {\n    //     map.getCanvas().style.cursor = '';\n    // });\n    //\n    // map.on('click', function(e) {\n    //\n    //   var features = map.queryRenderedFeatures(e.point, {\n    //     layers: ['unclustered-point'] // replace this with the name of the layer\n    //   });\n    //\n    //   if (!features.length) {\n    //     return;\n    //   }\n    //\n    //   var feature = features[0];\n    //\n    //   var title = feature.properties.title;\n    //   var image = feature.properties.i;\n    //   var desc = feature.properties.desc;\n    //   var latlng = feature.properties.id;\n    //\n    //   var data = '<div class=\"img2\" id=\"p103.818165,1.270491\" style=\"font-size: 11px;text-align: left; height:340px; width:240px; border: 1px solid rgba(0,0,0,0.5); background-size: cover; background-repeat:no-repeat; background-position:center;background-image:url(' + image + ') !important\"><div style=\"padding: 6px; padding-bottom:4px; width:228px; position: absolute; background:rgba(255,255,255, 0.7);\"><a style=\"font-size: 12px;color: green;\" href=\"https://intel.ingress.com/intel?ll=' + latlng + '&z=17&pll=' + latlng + '\" target=\"_blank\" >' + title + '</a><br>' + desc + '<br/></div></div>';\n    //\n    //\n    //\n    //   var popup = new mapboxgl.Popup({ offset: [0, 0] })\n    //     .setLngLat(feature.geometry.coordinates)\n    //     .setHTML(data)\n    //     .setLngLat(feature.geometry.coordinates)\n    //     .addTo(map);\n    //\n    // });\n    //\n    //\n    // // Insert the layer beneath any symbol layer.\n    // var layers = map.getStyle().layers;\n    //\n    // var labelLayerId;\n    // for (var i = 0; i < layers.length; i++) {\n    //     if (layers[i].type === 'symbol' && layers[i].layout['text-field']) {\n    //         labelLayerId = layers[i].id;\n    //         break;\n    //     }\n    // }\n    //\n    // map.addLayer({\n    //     'id': '3d-map',\n    //     'source': 'composite',\n    //     'source-layer': 'building',\n    //     'filter': ['==', 'extrude', 'true'],\n    //     'type': 'fill-extrusion',\n    //     'minzoom': 15,\n    //     'paint': {\n    //         //'fill-extrusion-color': '#5D6D7E',\n    //         'fill-extrusion-color': '#EBEDEF',\n    //\n    //         //'fill-extrusion-color': {\n    //         //    \"property\": \"height\",\n    //         //    \"stops\":[\n    //         //        [2.75, \"rgb(220, 239, 151)\"], // 1 floor\n    //         //        [5.5, \"rgb(178, 234, 129)\"],  // 2 floors\n    //         //        [13.75, \"rgb(122, 217, 141)\"],// 5 floors\n    //         //        [27.5, \"rgb(65, 184, 164)\"],  // 10 floors\n    //         //        [55, \"rgb(8, 69, 148)\"]       // 20 floors\n    //         //    ]\n    //         //},\n    //\n    //         // use an 'interpolate' expression to add a smooth transition effect to the\n    //         // buildings as the user zooms in\n    //         'fill-extrusion-height': [\n    //             \"interpolate\", [\"linear\"], [\"zoom\"],\n    //             15, 0,\n    //             15.05, [\"get\", \"height\"]\n    //         ],\n    //         'fill-extrusion-base': [\n    //             \"interpolate\", [\"linear\"], [\"zoom\"],\n    //             15, 0,\n    //             15.05, [\"get\", \"min_height\"]\n    //         ],\n    //         'fill-extrusion-opacity': 0.3\n    //     }\n    // }, labelLayerId);\n\n  }\n\n  /**\n   * To add a cross hair geo control on the top right\n   * hand corner to get user location\n   * @param {object} opt Options to override default options\n   * @return {this}\n   */\n  withGeoControl(opt = null) {\n    return this._addControl(new mapboxgl.GeolocateControl(opt || {\n      positionOptions: {\n        enableHighAccuracy: true\n\t    },\n\t    fitBoundsOptions: {maxZoom: 18},\n\t    trackUserLocation: false\n    }));\n  }\n\n  /**\n   * To add a scale control at the bottom of the map\n   * @param {object} opt Options to override default options\n   * @return {this}\n   */\n  withScaleControl(opt = null) {\n    return this._addControl(new mapboxgl.ScaleControl(opt || {\n      maxWidth: 100,\n      unit: 'metric'\n    }));\n  }\n\n  /**\n   * To add a navigation control at the right screen\n   * hand corner to get user location\n   * @param {object} opt Options to override default options\n   * @return {this}\n   */\n  withNavigationControl(opt = null) {\n    return this._addControl(new mapboxgl.NavigationControl(opt));\n  }\n\n  /**\n   * Standard set config\n   * @param {string} functionName The mapbox function name\n   * @param {string} configName The mapbox config name\n   * @param {mixed} value\n   * @return {this}\n   */\n  _setConfig(functionName, configName, value) {\n    if (this.map) {\n      this.map[functionName]({center: value});\n      console.log(this.map[functionName], {center: value});\n    } else {\n      this.config[configName] = value;\n    }\n    return this;\n  }\n\n  /**\n   * Add control\n   * @param {object} control\n   * @return {this}\n   */\n  _addControl(control) {\n    if (this.map) {\n      this.map.addControl(control);\n    } else {\n      this.controls.push(control);\n    }\n    return this;\n  }\n\n  renderTo(el) {\n    const map = this.map = new mapboxgl.Map({\n      container: el,\n      ...this.config\n    });\n    // Controls!\n    this.controls.forEach(control => map.addControl(control));\n    map.on('load', this.onMapLoad.bind(this));\n    return this;\n  }\n}\n\nexport default Map;\n","import Map from './Map';\nif (!$) {\n  console.error('jQuery is required');\n}\n\n$(() => {\n  if (window.mapboxAccessToken) {\n    const map = new Map(window.mapboxAccessToken);\n    map.style('mapbox://styles/uzzikie12/cjp0txnoj0l122rpbmt0bt4j6')\n       .center(1.362, 103.8123)\n       .zoom(10)\n       //.withGeoControl()\n       //.withScaleControl()\n       //.withNavigationControl()\n       .renderTo($('#map').get(0));\n  } else {\n    console.error('Missing mapboxAccessToken');\n  }\n});\n"],"sourceRoot":""}